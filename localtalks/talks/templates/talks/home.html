{% extends "talks/base.html" %}
{% load static %}

{% block content %}

{% if user.is_authenticated %}
    <a href="{% url 'ad_create' %}" class="btn btn-primary">Add Ad</a>
{% else %}
    <a href="{% url 'login' %}" class="btn btn-secondary">Add Ad (Login Required)</a>
{% endif %}

<h2>Latest Ads</h2>
<ul>
    {% for ad in latest_ads %}
    <li>
        <h3><a href="{% url 'ad_detail' ad.pk %}">{{ ad.title }}</a></h3>
        <p>{{ ad.description|truncatewords:20 }}</p>
        <small>Category: {% for category in ad.categories.all %}{{ category.name }}{% if not forloop.last %}, {% endif %}{% endfor %}</small>
    </li>
    {% endfor %}
</ul>

<a href="{% url 'ad-list' %}">View All Ads</a>
{% endblock %}