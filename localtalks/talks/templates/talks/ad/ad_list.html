{% extends "talks/base.html" %}
{% load static %}

{% block content %}

<div class="category-navbar category-margin">
    <nav class="navbar navbar-expand-lg navbar-light bg-light category-nav">
        <span class="navbar-brand">Ads by <br> categories:</span>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCategory" aria-controls="navbarCategory" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarCategory">
            <ul class="navbar-nav">
                {% for category in categories %}
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'ads_by_category' category.name %}">{{ category.name }}</a>
                    </li>
                {% endfor %}
            </ul>
        </div>
    </nav>
</div>

<div class="row">
    <div class="col-md-8 mx-auto content-center">
        {% if user.is_authenticated %}
            <a href="{% url 'ad_create' %}" class="btn btn-custom custom-margin custom-ads">Add Ad</a>
        {% else %}
            <a href="{% url 'login' %}" class="btn btn-custom custom-margin custom-ads">Add Ad (Login Required)</a>
        {% endif %}

        <h2 class="custom1-color custom-ads">All Ads</h2>
        
        {% include '_ad_list.html' %}

        <nav aria-label="Page navigation example">
            <ul class="pagination">
                <li class="page-item {% if not page_obj.has_previous %}disabled{% endif %}">
                    <a class="page-link" href="?page=1" aria-label="Previous">
                        <span class="custom-color" aria-hidden="true">&laquo;&laquo;</span>
                    </a>
                </li>
                <li class="page-item {% if not page_obj.has_previous %}disabled{% endif %}">
                    <a class="page-link" href="?page={% if page_obj.has_previous %}{{ page_obj.previous_page_number }}{% else %}1{% endif %}" aria-label="Previous">
                        <span class="custom-color" aria-hidden="true">&laquo;</span>
                    </a>
                </li>
                {% for i in page_obj.paginator.page_range %}
                    <li class="page-item {% if page_obj.number == i %}active{% endif %}">
                        <a class="page-link custom-color" href="?page={{ i }}">{{ i }}</a>
                    </li>
                {% endfor %}
                <li class="page-item {% if not page_obj.has_next or page_obj.number == page_obj.paginator.num_pages %}disabled{% endif %}">
                    <a class="page-link" href="?page={% if page_obj.has_next %}{{ page_obj.next_page_number }}{% else %}{{ page_obj.paginator.num_pages }}{% endif %}" aria-label="Next">
                        <span class="custom-color" aria-hidden="true">&raquo;</span>
                    </a>
                </li>
                <li class="page-item {% if not page_obj.has_next or page_obj.number == page_obj.paginator.num_pages %}disabled{% endif %}">
                    <a class="page-link" href="?page={{ page_obj.paginator.num_pages }}" aria-label="Last">
                        <span class="custom-color" aria-hidden="true">&raquo;&raquo;</span>
                    </a>
                </li>
            </ul>
        </nav>
    </div>
</div>
{% endblock %}
